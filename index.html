<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sports4Autism ‚Äî Engage. Move. Smile. Progress ‚≠ê</title>
  <style>
    :root {
      --bg1: #fef3c7; /* amber-100 */
      --bg2: #e0f2fe; /* sky-100 */
      --bg3: #fce7f3; /* pink-100 */
      --ink: #1f2937; /* gray-800 */
      --brand: #7c3aed; /* violet-600 */
      --brand-2: #06b6d4; /* cyan-500 */
      --ok: #16a34a; /* green-600 */
      --warn: #f59e0b; /* amber-500 */
      --oops: #ef4444; /* red-500 */
      --card: #ffffff;
      --muted: #6b7280; /* gray-500 */
      --shadow: 0 10px 30px rgba(31,41,55,0.15);
      --round: 22px;
    }
    html, body { height: 100%; }
    body {
      margin: 0; font-family: "Baloo 2", system-ui, -apple-system, Segoe UI, Roboto, Emoji, sans-serif;
      color: var(--ink);
      background: linear-gradient(120deg, var(--bg1), var(--bg2) 45%, var(--bg3));
      overflow-x: hidden;
    }
    /* Floating toy background */
    .toys { position: fixed; inset: 0; pointer-events: none; z-index: 0; overflow: hidden; }
    .toy { position: absolute; font-size: clamp(24px, 3vw, 50px); opacity: 0.25; filter: drop-shadow(0 2px 2px rgba(0,0,0,0.1)); animation: floaty 18s linear infinite; }
    .toy:nth-child(odd){ animation-duration: 22s; }
    .toy:nth-child(3n){ animation-duration: 26s; }
    @keyframes floaty { from { transform: translateY(110vh) rotate(0deg);} to { transform: translateY(-20vh) rotate(360deg);} }

    header {
      position: sticky; top: 0; z-index: 50; backdrop-filter: saturate(1.2) blur(8px);
      background: rgba(255,255,255,0.55); border-bottom: 1px solid rgba(0,0,0,0.05);
    }
    .nav { max-width: 1200px; margin: 0 auto; display: flex; align-items: center; gap: 14px; padding: 10px 16px; }
    .logo { display: flex; align-items: center; gap: 10px; font-weight: 800; letter-spacing: .5px; }
    .logo .mark { font-size: 30px; }
    .spacer { flex: 1; }
    .nav a { text-decoration: none; color: var(--ink); font-weight: 600; padding: 8px 12px; border-radius: 999px; }
    .nav a:hover { background: rgba(0,0,0,0.06); }
    .btn { background: var(--brand); color: white; border: none; padding: 10px 16px; border-radius: 999px; box-shadow: var(--shadow); cursor: pointer; font-weight: 700; }
    .btn.alt { background: var(--brand-2); }

    main { position: relative; z-index: 1; }
    section { max-width: 1200px; margin: 0 auto; padding: 48px 16px; }
    .hero { display: grid; grid-template-columns: 1.2fr 1fr; align-items: center; gap: 24px; }
    .title { font-size: clamp(32px, 4vw, 56px); line-height: 1.05; margin: 0 0 12px; }
    .subtitle { font-size: clamp(16px, 2vw, 20px); color: var(--ink); opacity: .85; margin: 0 0 20px; }
    .card { background: var(--card); border-radius: var(--round); box-shadow: var(--shadow); padding: 20px; }

    .grid { display: grid; grid-template-columns: repeat(12, minmax(0, 1fr)); gap: 16px; }
    .col-4 { grid-column: span 4; }
    .col-6 { grid-column: span 6; }
    .col-8 { grid-column: span 8; }
    .col-12{ grid-column: span 12; }
    @media (max-width: 900px){
      .hero { grid-template-columns: 1fr; }
      .col-4, .col-6, .col-8, .col-12 { grid-column: span 12; }
    }

    /* Game cards */
    .game-card { display: grid; grid-template-columns: 72px 1fr auto; align-items: center; gap: 12px; padding: 16px; border-radius: 18px; border: 2px dashed rgba(0,0,0,0.06); }
    .game-emoji { font-size: 42px; }
    .game-title { font-weight: 800; font-size: 18px; }
    .game-desc { font-size: 13px; color: var(--muted); }

    /* Dashboard fake charts */
    .chart { height: 160px; border-radius: 14px; background: linear-gradient(180deg, rgba(124,58,237,0.15), rgba(6,182,212,0.1)); position: relative; overflow: hidden; }
    .bar { position: absolute; bottom: 0; width: 18px; border-radius: 8px 8px 0 0; background: linear-gradient(180deg, var(--brand), var(--brand-2)); box-shadow: 0 6px 10px rgba(124,58,237,0.25); }

    /* Streaks & rewards */
    .pill { display: inline-flex; align-items: center; gap: 8px; padding: 8px 12px; border-radius: 999px; background: rgba(124,58,237,0.1); font-weight: 700; }
    .badge { padding: 10px 12px; border-radius: 14px; background: #fff; box-shadow: var(--shadow); text-align: center; }

    /* Modals */
    .modal { position: fixed; inset: 0; display: none; place-items: center; background: rgba(0,0,0,0.45); z-index: 100; }
    .modal.active { display: grid; }
    .modal .sheet { width: min(920px, 92vw); max-height: 86vh; overflow: auto; background: #fff; border-radius: 24px; box-shadow: var(--shadow); padding: 20px; }

    /* Forms */
    .field { display: grid; gap: 6px; }
    .field label { font-weight: 800; font-size: 14px; }
    .field input, .field select, .field textarea {
      padding: 12px 14px; border-radius: 12px; border: 2px solid rgba(0,0,0,0.08); outline: none; font-size: 15px;
      background: #fff; box-shadow: inset 0 1px 0 rgba(0,0,0,0.04);
    }
    .row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    @media (max-width: 700px){ .row { grid-template-columns: 1fr; } }

    footer { text-align: center; padding: 40px 20px; color: var(--muted); }

    /* Reduced motion option */
    .reduced-motion * { animation: none !important; transition: none !important; }
  </style>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400..800&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Floating toys layer -->
  <div class="toys" aria-hidden="true" id="toyLayer"></div>

  <header>
    <nav class="nav">
      <div class="logo">
        <span class="mark">üß©</span>
        <span>Sports4Autism</span>
      </div>
      <a href="#home">Home</a>
      <a href="#games">Games</a>
      <a href="#exercises">Exercises</a>
      <a href="#dashboard">Dashboard</a>
      <a href="#reports">Reports</a>
      <a href="#streaks">Streaks</a>
      <a href="#rewards">Rewards</a>
      <a href="#parents">Parents</a>
      <a href="#contact">Contact</a>
      <div class="spacer"></div>
      <button class="btn alt" id="btnLogin">Login</button>
      <button class="btn" id="btnSignup">Sign Up</button>
    </nav>
  </header>

  <main>
    <!-- HERO -->
    <section id="home">
      <div class="hero">
        <div>
          <h1 class="title">Engage. Move. Smile. Progress. ‚Äî One Star at a Time ‚≠ê</h1>
          <p class="subtitle">A colorful, autism-friendly movement playground with real-time insights for parents and therapists ‚Äî and pure fun for kids.</p>
          <div style="display:flex; gap:12px; flex-wrap: wrap;">
            <a class="btn" href="#games">Play a Game</a>
            <a class="btn alt" href="#dashboard">Open Dashboard</a>
            <label class="pill" style="cursor:pointer;">
              <input id="reduceMotion" type="checkbox" style="accent-color: var(--brand); transform: scale(1.2);" /> Reduce Motion
            </label>
          </div>
          <div style="margin-top:14px; color:var(--muted); font-weight:700">Sensory-friendly: predictable feedback ‚Ä¢ no required timers ‚Ä¢ customizable sounds</div>
        </div>
        <div class="card">
          <canvas id="confetti" width="500" height="300" style="width:100%; border-radius:16px; background: radial-gradient(circle at 20% 20%, #ffffff 0%, #f8fafc 60%, #eef2ff 100%);"></canvas>
          <div style="padding:8px 4px; text-align:center; font-weight:800;">üéà Welcome! Tap a game card below to start.
          </div>
        </div>
      </div>
    </section>

    <!-- GAMES -->
    <section id="games">
      <h2 class="title" style="font-size:34px;">Games Zone üéÆ</h2>
      <p class="subtitle">Short, joyful activities with instant stars, cheers, and gentle guidance. (Pose AI hooks ready.)</p>
      <div class="grid">
        <!-- Reach the Star -->
        <div class="col-6">
          <div class="card game-card">
            <div class="game-emoji">‚≠ê</div>
            <div>
              <div class="game-title">Reach the Star</div>
              <div class="game-desc">Stretch and touch glowing stars at different heights. Targets reach, balance, spatial awareness.</div>
            </div>
            <button class="btn" data-game="reach">Play</button>
          </div>
        </div>
        <!-- Monster Squat -->
        <div class="col-6">
          <div class="card game-card">
            <div class="game-emoji">üëπ</div>
            <div>
              <div class="game-title">Monster Squat</div>
              <div class="game-desc">Mimic the friendly wobble monster. Good form earns monster points and silly roars.</div>
            </div>
            <button class="btn" data-game="squat">Play</button>
          </div>
        </div>
        <!-- Side Step Slide -->
        <div class="col-6">
          <div class="card game-card">
            <div class="game-emoji">üï∫</div>
            <div>
              <div class="game-title">Side Step Slide</div>
              <div class="game-desc">Slide left/right with the character. Speed + accuracy = score.</div>
            </div>
            <button class="btn" data-game="sidestep">Play</button>
          </div>
        </div>
        <!-- Robot Dance -->
        <div class="col-6">
          <div class="card game-card">
            <div class="game-emoji">ü§ñ</div>
            <div>
              <div class="game-title">Robot Dance</div>
              <div class="game-desc">Follow the pose sequence. Great for sequencing + body awareness.</div>
            </div>
            <button class="btn" data-game="robot">Play</button>
          </div>
        </div>
        <!-- Animal Mimicry -->
        <div class="col-6">
          <div class="card game-card">
            <div class="game-emoji">üêí</div>
            <div>
              <div class="game-title">Animal Mimicry</div>
              <div class="game-desc">Pick bear/frog/crab. Imitate their moves. Creativity + strength.</div>
            </div>
            <button class="btn" data-game="animal">Play</button>
          </div>
        </div>
        <!-- Balance Beam -->
        <div class="col-6">
          <div class="card game-card">
            <div class="game-emoji">üåâ</div>
            <div>
              <div class="game-title">Balance Beam Adventure</div>
              <div class="game-desc">Walk the wobbly bridge; stay centered to win stars.</div>
            </div>
            <button class="btn" data-game="beam">Play</button>
          </div>
        </div>
        <!-- Flamingo Stand -->
        <div class="col-6">
          <div class="card game-card">
            <div class="game-emoji">ü¶¢</div>
            <div>
              <div class="game-title">Flamingo Stand</div>
              <div class="game-desc">Hold a single-leg stand. Stability earns rewards.</div>
            </div>
            <button class="btn" data-game="flamingo">Play</button>
          </div>
        </div>
        <!-- Ball Bounce Buddy -->
        <div class="col-6">
          <div class="card game-card">
            <div class="game-emoji">üéæ</div>
            <div>
              <div class="game-title">Ball Bounce Buddy</div>
              <div class="game-desc">Bounce the virtual ball with hand motions.</div>
            </div>
            <button class="btn" data-game="bounce">Play</button>
          </div>
        </div>
        <!-- Windmill Arms -->
        <div class="col-12">
          <div class="card game-card">
            <div class="game-emoji">üå¨Ô∏è</div>
            <div>
              <div class="game-title">Windmill Arms</div>
              <div class="game-desc">Big circular arm sweeps. Track range and fluidity.</div>
            </div>
            <button class="btn" data-game="windmill">Play</button>
          </div>
        </div>
      </div>
    </section>

    <!-- EXERCISES -->
    <section id="exercises">
      <h2 class="title" style="font-size:34px;">Exercise Tracker üìä</h2>
      <div class="grid">
        <div class="col-8">
          <div class="card">
            <div style="display:flex; gap:10px; align-items:center; justify-content:space-between;">
              <div class="pill">Daily Goal: <span id="dailyGoal">10 mins</span> ‚è±Ô∏è</div>
              <button class="btn alt" id="btnComplete">Mark 1 Session Done</button>
            </div>
            <div style="height:12px; background:#eef2ff; border-radius:999px; margin:16px 0; overflow:hidden;">
              <div id="goalProgress" style="height:100%; width:0%; background:linear-gradient(90deg, var(--brand), var(--brand-2)); transition: width .4s ease;"></div>
            </div>
            <div id="log" style="font-weight:700; color:var(--muted);"></div>
          </div>
        </div>
        <div class="col-4">
          <div class="card">
            <div class="pill">üî• Streak: <span id="streakCount">0</span> days</div>
            <div style="margin-top:10px; display:flex; gap:10px; flex-wrap:wrap;" id="streakIcons"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- DASHBOARD -->
    <section id="dashboard">
      <h2 class="title" style="font-size:34px;">Real-Time Monitoring Dashboard üìà</h2>
      <div class="grid">
        <div class="col-8">
          <div class="card">
            <div style="display:flex; gap:10px; align-items:center; justify-content:space-between;">
              <strong>Live Pose Score (simulated)</strong>
              <button class="btn alt" id="btnLive">Start Live</button>
            </div>
            <div class="chart" id="chart"></div>
          </div>
        </div>
        <div class="col-4">
          <div class="card">
            <strong>Customization</strong>
            <div class="field" style="margin-top:10px;">
              <label for="difficulty">Difficulty</label>
              <select id="difficulty">
                <option>Easy</option>
                <option>Medium</option>
                <option>Hard</option>
              </select>
            </div>
            <div class="field">
              <label for="sound">Sound</label>
              <select id="sound">
                <option>On</option>
                <option>Off</option>
              </select>
            </div>
            <div class="field">
              <label for="timerOpt">Timers</label>
              <select id="timerOpt">
                <option>Hidden (default)</option>
                <option>Show as helper</option>
              </select>
            </div>
            <button class="btn" id="savePrefs" style="margin-top:10px;">Save Preferences</button>
            <div id="prefsSaved" style="margin-top:8px; color: var(--ok); font-weight:800; display:none;">Saved! ‚úÖ</div>
          </div>
        </div>
      </div>
    </section>

    <!-- REPORTS -->
    <section id="reports">
      <h2 class="title" style="font-size:34px;">Reports üìë</h2>
      <div class="grid">
        <div class="col-8">
          <div class="card">
            <p class="subtitle">Export weekly progress for therapists (CSV/PDF). Sample data below.</p>
            <div style="overflow:auto;">
              <table id="reportTable" style="width:100%; border-collapse:collapse;">
                <thead>
                  <tr>
                    <th style="text-align:left; padding:8px;">Date</th>
                    <th style="text-align:left; padding:8px;">Game</th>
                    <th style="text-align:left; padding:8px;">Score</th>
                    <th style="text-align:left; padding:8px;">Duration (m)</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
            <div style="margin-top:12px; display:flex; gap:10px;">
              <button class="btn" id="btnCSV">Download CSV</button>
              <button class="btn alt" id="btnPDF">Download PDF</button>
            </div>
          </div>
        </div>
        <div class="col-4">
          <div class="card">
            <strong>Quick Stats</strong>
            <ul>
              <li>Total Sessions: <b id="statSessions">0</b></li>
              <li>Avg Score: <b id="statAvg">0</b></li>
              <li>Favorite Game: <b id="statFav">‚Äî</b></li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- STREAKS & REWARDS -->
    <section id="streaks">
      <h2 class="title" style="font-size:34px;">Streaks üî• & Rewards üéÅ</h2>
      <div class="grid">
        <div class="col-6">
          <div class="card">
            <div class="pill">Current Streak: <span id="streakDays">0</span> days</div>
            <div style="margin-top:10px; display:flex; gap:8px; flex-wrap:wrap;" id="streakFires"></div>
            <button class="btn" id="btnCheckIn" style="margin-top:10px;">Daily Check-in</button>
          </div>
        </div>
        <div class="col-6" id="rewards">
          <div class="card">
            <strong>Rewards Vault</strong>
            <div style="display:grid; grid-template-columns: repeat(4, 1fr); gap:10px; margin-top:10px;" id="rewardGrid"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- PARENTS -->
    <section id="parents">
      <h2 class="title" style="font-size:34px;">Parents' Corner üè°</h2>
      <div class="grid">
        <div class="col-8">
          <div class="card">
            <ul style="line-height:1.7; margin:0; padding-left:18px;">
              <li><b>Visual First:</b> We keep instructions short with demo animations.</li>
              <li><b>Predictable Rewards:</b> Stars, badges, and cheers arrive instantly.</li>
              <li><b>Customization:</b> Adjust difficulty, reps, and sensory settings.</li>
              <li><b>No Pressure:</b> Timers are optional; effort is celebrated.</li>
              <li><b>Privacy:</b> Child mode avoids typing; parent controls sharing.</li>
            </ul>
          </div>
        </div>
        <div class="col-4">
          <div class="card">
            <strong>Share Progress</strong>
            <div class="field" style="margin-top:10px;">
              <label>Email weekly report to</label>
              <input id="shareEmail" type="email" placeholder="therapist@example.com" />
            </div>
            <button class="btn" id="btnShare">Send Test Report</button>
            <div id="shareNote" style="margin-top:8px; color: var(--ok); font-weight:800; display:none;">Sent (simulated) ‚úÖ</div>
          </div>
        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact">
      <h2 class="title" style="font-size:34px;">Contact & Support üìû</h2>
      <div class="grid">
        <div class="col-6">
          <div class="card">
            <div class="row">
              <div class="field">
                <label>Name</label>
                <input id="cName" placeholder="Your name" />
              </div>
              <div class="field">
                <label>Email</label>
                <input id="cEmail" type="email" placeholder="you@example.com" />
              </div>
            </div>
            <div class="field">
              <label>Message</label>
              <textarea id="cMsg" rows="4" placeholder="How can we help?"></textarea>
            </div>
            <button class="btn" id="btnContact">Send</button>
            <div id="contactNote" style="margin-top:8px; color: var(--ok); font-weight:800; display:none;">Thanks! We will reply soon. ‚úÖ</div>
          </div>
        </div>
        <div class="col-6">
          <div class="card">
            <strong>Quick Links</strong>
            <ul>
              <li>FAQ ‚Ä¢ Safety & Privacy</li>
              <li>Therapist Onboarding</li>
              <li>Community Guidelines</li>
            </ul>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    Made with üíú for movement, play, and confidence. ¬© <span id="year"></span> Sports4Autism.
  </footer>

  <!-- MODALS: Login, Signup, Game Player -->
  <div class="modal" id="modalLogin">
    <div class="sheet">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <h3>Login</h3>
        <button class="btn alt" data-close>Close</button>
      </div>
      <div class="row">
        <div class="card">
          <h4>Child Mode üåà</h4>
          <div class="field">
            <label>Pick Avatar</label>
            <select id="childAvatar">
              <option>üêº Panda</option>
              <option>ü¶Ñ Unicorn</option>
              <option>ü¶ñ Dino</option>
              <option>üêØ Tiger</option>
            </select>
          </div>
          <button class="btn" id="childEnter">Enter</button>
        </div>
        <div class="card">
          <h4>Parent/Therapist üë©‚Äç‚öïÔ∏è</h4>
          <div class="field"><label>Email</label><input id="loginEmail" type="email" placeholder="you@example.com"></div>
          <div class="field"><label>Password</label><input id="loginPass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"></div>
          <button class="btn" id="parentLogin">Login</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="modalSignup">
    <div class="sheet">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <h3>Sign Up</h3>
        <button class="btn alt" data-close>Close</button>
      </div>
      <div class="row">
        <div class="field"><label>Full Name</label><input id="suName" /></div>
        <div class="field"><label>Email</label><input id="suEmail" type="email" /></div>
        <div class="field"><label>Password</label><input id="suPass" type="password" /></div>
        <div class="field"><label>Role</label>
          <select id="suRole"><option>Parent</option><option>Therapist</option></select>
        </div>
      </div>
      <button class="btn" id="btnCreate">Create Account</button>
      <div id="suNote" style="margin-top:8px; color: var(--ok); font-weight:800; display:none;">Account created (simulated) ‚úÖ</div>
    </div>
  </div>

  <div class="modal" id="modalGame">
    <div class="sheet">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <h3 id="gameTitle">Game</h3>
        <button class="btn alt" data-close>Close</button>
      </div>
      <canvas id="gameCanvas" width="900" height="420" style="width:100%; background:#0ea5e9; border-radius:16px; display:block;"></canvas>
      <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-top:10px;">
        <button class="btn" id="btnStartGame">Start</button>
        <button class="btn alt" id="btnStopGame">Stop</button>
        <div class="pill">Score: <span id="gameScore">0</span></div>
        <div class="pill">Stars: <span id="gameStars">0</span> ‚≠ê</div>
      </div>
      <small style="color:var(--muted); font-weight:700;">Controls for placeholder: click/tap on targets, use ‚Üê ‚Üí keys to side-step, press space to jump/squat depending on the game.</small>
    </div>
  </div>

  <script>
    /* ---------- Floating toys ---------- */
    const toys = ['üß∏','üöÇ','ü™Ä','üéà','üß©','ü™Å','üé†','üèÄ','ü¶Ñ','‚≠ê','üé™','üöÄ'];
    const toyLayer = document.getElementById('toyLayer');
    function spawnToys(){
      toyLayer.innerHTML = '';
      for(let i=0;i<28;i++){
        const d = document.createElement('div');
        d.className = 'toy';
        d.style.left = Math.random()*100+'%';
        d.style.animationDelay = (Math.random()*-20)+'s';
        d.textContent = toys[Math.floor(Math.random()*toys.length)];
        toyLayer.appendChild(d);
      }
    }
    spawnToys();

    /* ---------- Confetti canvas (hero) ---------- */
    const confetti = document.getElementById('confetti');
    const cctx = confetti.getContext('2d');
    const bits = Array.from({length: 120}, () => ({ x: Math.random()*confetti.width, y: Math.random()*confetti.height, r: 2+Math.random()*4, vy: 1+Math.random()*2 }));
    function drawConfetti(){
      cctx.clearRect(0,0,confetti.width, confetti.height);
      bits.forEach(b=>{ b.y += b.vy; if(b.y>confetti.height) b.y=-10; cctx.beginPath(); cctx.arc(b.x,b.y,b.r,0,Math.PI*2); cctx.fillStyle = `hsl(${Math.random()*360},80%,60%)`; cctx.fill(); });
      if(!document.body.classList.contains('reduced-motion')) requestAnimationFrame(drawConfetti);
    }
    drawConfetti();

    /* ---------- Reduced motion ---------- */
    const reduceMotion = document.getElementById('reduceMotion');
    reduceMotion.addEventListener('change',()=>{
      document.body.classList.toggle('reduced-motion', reduceMotion.checked);
    });

    /* ---------- Footer year ---------- */
    document.getElementById('year').textContent = new Date().getFullYear();

    /* ---------- Modal helpers ---------- */
    const modalLogin = document.getElementById('modalLogin');
    const modalSignup = document.getElementById('modalSignup');
    const modalGame = document.getElementById('modalGame');
    function openModal(m){ m.classList.add('active'); }
    function closeModal(m){ m.classList.remove('active'); }
    document.querySelectorAll('[data-close]').forEach(b=>b.addEventListener('click', e=> closeModal(b.closest('.modal'))));
    document.getElementById('btnLogin').onclick=()=>openModal(modalLogin);
    document.getElementById('btnSignup').onclick=()=>openModal(modalSignup);

    /* ---------- Fake auth ---------- */
    document.getElementById('childEnter').onclick=()=>{ alert('Welcome, explorer! üéà'); closeModal(modalLogin); };
    document.getElementById('parentLogin').onclick=()=>{ alert('Logged in (simulated) ‚úÖ'); closeModal(modalLogin); };
    document.getElementById('btnCreate').onclick=()=>{ document.getElementById('suNote').style.display='block'; setTimeout(()=>closeModal(modalSignup), 1000); };

    /* ---------- Exercise tracker ---------- */
    const goalProgress = document.getElementById('goalProgress');
    const log = document.getElementById('log');
    let sessionsDone = Number(localStorage.getItem('s4a_sessions')||0);
    function updateGoal(){
      const pct = Math.min(100, sessionsDone*10);
      goalProgress.style.width = pct+'%';
      log.textContent = `Sessions completed: ${sessionsDone} ‚Ä¢ Progress ${pct}%`;
      document.getElementById('statSessions').textContent = sessionsDone;
    }
    document.getElementById('btnComplete').onclick=()=>{ sessionsDone++; localStorage.setItem('s4a_sessions', sessionsDone); addReward(1); updateGoal(); };
    updateGoal();

    /* ---------- Streaks ---------- */
    const streakKey = 's4a_streak';
    const lastKey = 's4a_last';
    let streak = Number(localStorage.getItem(streakKey)||0);
    const streakCount = document.getElementById('streakCount');
    const streakDays = document.getElementById('streakDays');
    function renderStreak(){
      streakCount.textContent = streak;
      streakDays.textContent = streak;
      const icons = document.getElementById('streakIcons');
      const fires = document.getElementById('streakFires');
      icons.innerHTML = ''; fires.innerHTML = '';
      for(let i=0;i<Math.min(streak, 30);i++){ const s=document.createElement('span'); s.textContent='üî•'; s.style.fontSize='22px'; icons.appendChild(s); fires.appendChild(s.cloneNode(true)); }
    }
    document.getElementById('btnCheckIn').onclick=()=>{
      const today = new Date(); const last = localStorage.getItem(lastKey);
      const lastDate = last? new Date(last): null;
      const diff = lastDate? (today - lastDate)/(1000*60*60*24) : 99;
      if(diff>=1 && diff<2) { streak++; }
      else if(diff>=2) { streak = 1; } else if(!last) { streak=1; }
      localStorage.setItem(streakKey, streak);
      localStorage.setItem(lastKey, today.toISOString());
      renderStreak();
    };
    renderStreak();

    /* ---------- Rewards ---------- */
    const rewardGrid = document.getElementById('rewardGrid');
    let stars = Number(localStorage.getItem('s4a_stars')||0);
    function addReward(n){ stars += n; localStorage.setItem('s4a_stars', stars); paintRewards(); }
    function paintRewards(){
      rewardGrid.innerHTML = '';
      const tiers = [10, 25, 50, 100, 150, 200, 300, 500];
      tiers.forEach(t=>{
        const div = document.createElement('div'); div.className='badge';
        div.innerHTML = `<div style="font-size:30px;">${stars>=t?'üéâ':'üéÅ'}</div><div style="font-weight:800;">${t} ‚≠ê</div>`;
        rewardGrid.appendChild(div);
      });
      document.getElementById('gameStars').textContent = stars;
    }
    paintRewards();

    /* ---------- Dashboard live score (fake) ---------- */
    const chart = document.getElementById('chart');
    function renderBars(){ chart.innerHTML = ''; for(let i=0;i<20;i++){ const b=document.createElement('div'); b.className='bar'; b.style.left = (i*22+10)+'px'; b.style.height = (40+Math.random()*110)+'px'; chart.appendChild(b);} }
    let liveTimer=null; document.getElementById('btnLive').onclick=()=>{ if(liveTimer){ clearInterval(liveTimer); liveTimer=null; return; } liveTimer=setInterval(renderBars, 600); };
    renderBars();

    /* ---------- Preferences ---------- */
    document.getElementById('savePrefs').onclick=()=>{ localStorage.setItem('s4a_prefs', JSON.stringify({ difficulty: difficulty.value, sound: sound.value, timer: timerOpt.value })); const n=document.getElementById('prefsSaved'); n.style.display='block'; setTimeout(()=>n.style.display='none', 1200); };

    /* ---------- Reports: sample data + export ---------- */
    const sampleGames = ['Reach the Star','Monster Squat','Side Step Slide','Robot Dance','Animal Mimicry','Balance Beam','Flamingo Stand','Ball Bounce','Windmill Arms'];
    const tbody = document.querySelector('#reportTable tbody');
    let rows=[]; function seedReports(){
      rows = Array.from({length: 20}, (_,i)=>{
        const d = new Date(Date.now()- i*86400000);
        const game = sampleGames[Math.floor(Math.random()*sampleGames.length)];
        const score = Math.floor(50+Math.random()*50);
        const dur = Math.floor(5+Math.random()*15);
        return { date: d.toISOString().slice(0,10), game, score, dur };
      }).reverse();
      paintReport();
    }
    function paintReport(){ tbody.innerHTML=''; let total=0, fav={}; rows.forEach(r=>{ total+=r.score; fav[r.game]=(fav[r.game]||0)+1; const tr=document.createElement('tr'); tr.innerHTML=`<td style="padding:8px;">${r.date}</td><td style="padding:8px;">${r.game}</td><td style="padding:8px;">${r.score}</td><td style="padding:8px;">${r.dur}</td>`; tbody.appendChild(tr); }); document.getElementById('statAvg').textContent=(total/rows.length|0); document.getElementById('statFav').textContent=Object.entries(fav).sort((a,b)=>b[1]-a[1])[0]?.[0]||'‚Äî'; }
    seedReports();

    document.getElementById('btnCSV').onclick=()=>{
      const csv = ['Date,Game,Score,Duration']; rows.forEach(r=>csv.push(`${r.date},${r.game},${r.score},${r.dur}`));
      const blob = new Blob([csv.join('\n')], {type:'text/csv'}); const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='sports4autism_report.csv'; a.click(); URL.revokeObjectURL(url);
    };
    document.getElementById('btnPDF').onclick=()=>{ alert('PDF export placeholder. Integrate jsPDF or server-side later.'); };

    /* ---------- Contact / Share ---------- */
    document.getElementById('btnContact').onclick=()=>{ document.getElementById('contactNote').style.display='block'; };
    document.getElementById('btnShare').onclick=()=>{ document.getElementById('shareNote').style.display='block'; };

    /* ---------- GAME ENGINE (placeholder mini-games) ---------- */
    const gameCanvas = document.getElementById('gameCanvas');
    const g = gameCanvas.getContext('2d');
    let gameType = null; let score=0; let tick=0; let running=false; let targets=[]; let player={x: 100, y: 320, vx:0};

    function clearGame(){ g.clearRect(0,0,gameCanvas.width, gameCanvas.height); }
    function drawGround(){ g.fillStyle='#0284c7'; g.fillRect(0,360,900,60); g.fillStyle='rgba(255,255,255,0.2)'; for(let i=0;i<18;i++){ g.fillRect(i*50, 365, 30, 6);} }

    // Spawn star targets for Reach the Star
    function spawnStar(){ targets.push({x: 100+Math.random()*700, y: 80+Math.random()*240, r: 18}); }

    function drawTargets(){ targets.forEach(t=>{ g.beginPath(); g.fillStyle = 'gold'; g.arc(t.x, t.y, t.r, 0, Math.PI*2); g.fill(); g.strokeStyle='rgba(255,255,255,0.8)'; g.lineWidth=3; g.stroke(); }); }

    function drawPlayer(){ g.fillStyle='#fef3c7'; g.fillRect(player.x-15, player.y-40, 30, 40); g.fillStyle='#1f2937'; g.fillRect(player.x-12, player.y-52, 24, 12); /* head */ g.fillStyle='#06b6d4'; g.fillRect(player.x-18, player.y, 36, 16); }

    function loop(){ if(!running) return; tick++; clearGame(); // background sky
      const grd = g.createLinearGradient(0,0,0,420); grd.addColorStop(0,'#7dd3fc'); grd.addColorStop(1,'#38bdf8'); g.fillStyle=grd; g.fillRect(0,0,900,420);
      drawGround(); drawTargets(); drawPlayer();
      // Game-specific logic
      if(gameType==='reach'){
        if(tick%90===0) spawnStar();
      }
      if(gameType==='sidestep'){
        // Auto-spawn gates
        if(tick%70===0) targets.push({x: 900, y: 310, r: 0, gate:true, dir: Math.random()>0.5? 'left':'right'});
        targets.forEach(t=>{ if(t.gate){ t.x -= 4; g.fillStyle='white'; g.fillRect(t.x-20,260,40,100); g.fillStyle='black'; g.font='20px Baloo 2'; g.fillText(t.dir==='left'?'‚¨ÖÔ∏è':'‚û°Ô∏è', t.x-8, 310); }});
      }
      if(gameType==='squat'){
        if(tick%120===0) targets.push({x: 200+Math.random()*500, y: 300, r: 24, monster:true});
        targets.forEach(t=>{ if(t.monster){ g.fillStyle='#fca5a5'; g.beginPath(); g.arc(t.x, t.y, 24, 0, Math.PI*2); g.fill(); g.fillStyle='#1f2937'; g.fillRect(t.x-16, t.y+20, 32, 6); }});
      }
      if(gameType==='robot'){
        if(tick%150===0){ const seq=['ARM UP','ARM SIDE','MARCH','CLAP']; targets.push({x:450,y:120,text:seq[Math.floor(Math.random()*seq.length)]}); }
        targets.forEach(t=>{ g.fillStyle='white'; g.fillRect(t.x-80,t.y-30,160,60); g.fillStyle='#111827'; g.font='22px Baloo 2'; g.fillText(t.text, t.x-60, t.y+8); });
      }
      if(gameType==='animal'){
        if(tick%150===0){ const animals=['BEAR','FROG','CRAB']; targets.push({x:450,y:120,text:animals[Math.floor(Math.random()*animals.length)]}); }
        targets.forEach(t=>{ g.fillStyle='white'; g.fillRect(t.x-70,t.y-30,140,60); g.fillStyle='#111827'; g.font='22px Baloo 2'; g.fillText(t.text, t.y>0? t.x-40: 0, t.y+8); });
      }
      if(gameType==='beam'){
        g.fillStyle='rgba(255,255,255,0.7)'; g.fillRect(100, 330 + Math.sin(tick/20)*6, 700, 8);
      }
      if(gameType==='flamingo'){
        if(tick%300===0) targets.push({x:750, y:180, timer:300});
        targets.forEach(t=>{ g.fillStyle='white'; g.beginPath(); g.arc(t.x,t.y,20,0,Math.PI*2); g.fill(); g.fillStyle='#111827'; g.fillText('Hold‚Ä¶', t.x-28, t.y+40); t.timer--; if(t.timer<=0){ score+=10; targets.splice(targets.indexOf(t),1);} });
      }
      if(gameType==='bounce'){
        if(targets.length===0) targets.push({x:450, y:120, vy: 2});
        const b = targets[0]; b.y += b.vy; if(b.y>260||b.y<100) b.vy *= -1; g.fillStyle='white'; g.beginPath(); g.arc(b.x,b.y,18,0,Math.PI*2); g.fill();
      }
      if(gameType==='windmill'){
        const center = {x:450, y:200}; const angle = tick/20; const r=80; g.strokeStyle='rgba(255,255,255,0.9)'; g.lineWidth=10; g.beginPath(); g.moveTo(center.x, center.y); g.lineTo(center.x+Math.cos(angle)*r, center.y+Math.sin(angle)*r); g.stroke(); g.beginPath(); g.moveTo(center.x, center.y); g.lineTo(center.x+Math.cos(angle+Math.PI)*r, center.y+Math.sin(angle+Math.PI)*r); g.stroke();
      }

      // Player motion
      player.x += player.vx; player.x = Math.max(40, Math.min(860, player.x));

      requestAnimationFrame(loop);
    }

    // Input handlers
    window.addEventListener('keydown', (e)=>{
      if(e.key==='ArrowLeft') player.vx=-5; if(e.key==='ArrowRight') player.vx=5;
      if(e.key===' '){ if(gameType==='squat'){ score+=5; }
        if(gameType==='bounce'){ const b=targets[0]; if(Math.abs(b.y-180)<30){ b.vy*=-1; score+=2; } }
      }
    });
    window.addEventListener('keyup', (e)=>{ if(['ArrowLeft','ArrowRight'].includes(e.key)) player.vx=0; });

    // Pointer interactions (click stars / gates)
    gameCanvas.addEventListener('click', (e)=>{
      const rect = gameCanvas.getBoundingClientRect(); const x = (e.clientX-rect.left)/rect.width*gameCanvas.width; const y = (e.clientY-rect.top)/rect.height*gameCanvas.height;
      if(gameType==='reach'){
        targets = targets.filter(t=>{ const hit = Math.hypot(t.x-x, t.y-y) < t.r+10; if(hit){ score+=3; addReward(1);} return !hit; });
      }
      if(gameType==='sidestep'){
        targets = targets.filter(t=>{ if(!t.gate) return true; if(Math.abs(t.x-player.x)<30){ score+=3; return false; } return true; });
      }
    });

    // Game lifecycle
    function startGame(type){ gameType=type; score=0; tick=0; targets=[]; player={x: 100, y:320, vx:0}; running=true; requestAnimationFrame(loop); document.getElementById('gameScore').textContent=score; }
    function stopGame(){ running=false; clearGame(); addReward(Math.floor(score/5)); }
    document.getElementById('btnStartGame').onclick=()=>{ startGame(gameType); };
    document.getElementById('btnStopGame').onclick=()=>{ stopGame(); };

    // Open game modal with chosen game
    document.querySelectorAll('[data-game]').forEach(btn=> btn.addEventListener('click', ()=>{
      const type = btn.getAttribute('data-game');
      const names = { reach:'Reach the Star ‚≠ê', squat:'Monster Squat üëπ', sidestep:'Side Step Slide üï∫', robot:'Robot Dance ü§ñ', animal:'Animal Mimicry üêí', beam:'Balance Beam Adventure üåâ', flamingo:'Flamingo Stand ü¶¢', bounce:'Ball Bounce Buddy üéæ', windmill:'Windmill Arms üå¨Ô∏è' };
      document.getElementById('gameTitle').textContent = names[type] || 'Game';
      openModal(modalGame); gameType=type; startGame(type);
    }));

    // Close game modal stops game
    modalGame.addEventListener('click', (e)=>{ if(e.target===modalGame) { stopGame(); closeModal(modalGame); } });
    modalLogin.addEventListener('click', (e)=>{ if(e.target===modalLogin) closeModal(modalLogin); });
    modalSignup.addEventListener('click', (e)=>{ if(e.target===modalSignup) closeModal(modalSignup); });

  </script>
</body>
</html>
